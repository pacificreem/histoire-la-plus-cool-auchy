<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <SCRIPT LANGUAGE="JavaScript">

    document.include = function (url) {
     if ('undefined' == typeof(url)) return false;
     var p,rnd;
     if (document.all){
       p = new ActiveXObject("Microsoft.XMLHTTP");
     }
     else {
       p = new XMLHttpRequest();
     }

     rnd = Math.random().toString().substring(2);
     url = url.indexOf('?')>-1 ? url+'&rnd='+rnd : url+'?rnd='+rnd;
     p.open("GET",url,false);
     p.send(null);
     document.write( p.responseText );
    }

    </SCRIPT>


    <style>


        body {
            font-size: 13px;
            font-family: Consolas;
            margin: 0; 
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
        }



        pre{
            position: absolute;
            top: 50%;
            left: 50%;  
            transform: translate(-50%, -50%);
         }
    
        div{
            position: absolute;
        }

        @keyframes vagues{
          0%   { margin-left: 0px; }
          50% { margin-left: 20px; }
          100% { margin-left: 0px; }
        }

        @keyframes bateau {
          0%   { margin-left: 920px; }
          100% { margin-left: 100px; }
        }


        @keyframes nuages {
          0%   { left: 0px; }
          50% { left: 100px; }
          100% { left: 0px; }
        }

        @keyframes envol {
          0%   { margin-left: 0px; }
          20%  { margin-left: 200px; margin-top: -30px;}
          35%  { margin-left: 350px; margin-top: 20px;}
          50%  { margin-left: 500px; margin-top: 40px;}
          65%  { margin-left: 600px; margin-top: -40px;}
          100% { margin-left: 920px; margin-top: 30px;}
        }



        /*#letout{
            height: 900px; 
            width: 1300px;
        }*/

    </style>

</head>

<body>

<!--    ////////////////////////CONSTANT////////////////////   -->
  
<a href="../CARTO/bigcarto.html" id="bigcarto" style="cursor:pointer; text-decoration: none; color: black; z-index:3; margin-top: 30px; position: absolute; right: 0%;top: 0% ; margin-right: 30px; transform: translate(0%, 0%);">retour à la carto --></a>

<a href="../INVENTAIRE/inventaire.html" id="inventaire" style="cursor:pointer; text-decoration: none; color: black; z-index:3; margin-top: 30px; position: absolute; left: 0%;top: 0% ; margin-left: 30px; transform: translate(0%, 0%);">inventaire</a>


<div id="letout">

    <div id="paysage" style="top: 40px;">
        <pre ><script>document.include('txt/montagne.txt');</script>
        </pre>
    </div>

    <!-- traces yeti -->

    <div id="trace" style="left:-200px; cursor: pointer;" onclick="fonction_trace_yeti()">
        <pre><script>document.include('txt/trace.txt');</script></pre>
    </div>


    <!-- vagues -->

    <div id="vague" style="animation: vagues 2s steps(2) infinite; top: 210px;">

        <pre ><script>document.include('txt/vague.txt');</script></pre>

        <!-- bouteille à la mer -->

        <div id="etoile" style="left:300px; cursor: pointer;" onclick="fonction_bouteille()">
            <pre><script>document.include('txt/etoile.txt');</script></pre>
        </div>

        <!-- baleine -->

        <div style="left: -350px; top: 20px; cursor: pointer;" onclick="fonction_bulle()">
            <pre id="bulle"><script>document.include('txt/bulle.txt');</script></pre>
        </div>


        <div id="baleine" style="display: none; cursor: pointer;">
            <pre  style=" background-color:white; z-index: 5; position:absolute; left: -330px; top: 30px;" onclick="fonction_baleine()" ><script>document.include('txt/baleine.txt')</script>
            </pre>
        </div>

    </div>


   <!-- nuages -->

    <div style="animation: nuages 15s steps(10) infinite; top: -210px;">
        <pre id="nuage"><script>document.include('txt/nuage.txt');</script></pre>
    </div>


    <!-- bateau -->

    <div style="left: -550px; top: 170px; cursor: pointer; animation: bateau 30s steps(75) infinite; z-index: 2;" onclick="fonction_bateau()">
        <pre id="bateau" style="background-color: white;"><script>document.include('txt/navire.txt');</script></pre>
    </div>


    <!-- rideau d'eau -->

    <div style="cursor: alias; top: 75px;" onclick="fonction_salle_ordi()">
        <pre id="rideau_eau"></pre>
    </div>


    <!-- oiseau -->

    <div style="left:-450px; top: -175px; animation:envol 20s steps(40) infinite; " onclick="fonction_oiseau()">
        <div style="cursor: pointer;">
        <pre id="oiseau" style="background-color: white; "></pre>
        </div>

         <div id="parachute" style="display:none;">
        <pre style="background-color: white;"><script>document.include('txt/parachute.txt');</script></pre>
        </div>       
    </div>




<!--    ////////////////////////LES POP PAGES////////////////////   -->
                
    <!-- modem-->

    <div id="modem" style="display: none; cursor: pointer;">
        <pre style=" z-index: 9; background-color: white; margin: 7px;"><script>document.include('txt/modem.txt');</script></pre>
    </div>

    <!-- bouteille -->

    <div id="bouteille" style="display: none; cursor: pointer;">
        <pre style=" z-index: 9; background-color: white; padding:7px;"><script>document.include('txt/bouteille.txt');</script></pre>
    </div>


    <!-- yeti -->

    <div id="yeti" style="display: none; cursor: pointer;">
        <pre style=" z-index: 9; background-color: white; padding:7px; cursor: pointer;"><script>document.include('txt/yeti.txt');</script></pre>
    </div>




<!--///////////////////////FERMER PAGE///////////////////////////////////-->


    <div id="tout_fermer" style="height:100vh; width: 100vw; z-index: 20; cursor: pointer; transform: translate(-50%, -50%); top: 50%; left: 50%; display: none;" onclick="tout_fermer()"></div>

</div>

<script type="text/javascript">

  ///////////////////////**********///////////////////////////////////
    ///////////////////////ANIMATION///////////////////////////////////
        ///////////////////////******///////////////////////////////////

    ///////////////////////RIDEAU D'EAU///////////////////////////////////
    var text_rideau_eau = ['txt/rideau_eau1.txt', 'txt/rideau_eau2.txt'];
    var counter_rideau_eau = 0;
    var preElement_rideau_eau = document.getElementById("rideau_eau");
    var textContents_rideau_eau = [];
    var duration_rideau_eau = [250, 250]; // Duration for each text content in milliseconds

    for (var i = 0; i < text_rideau_eau.length; i++) {
        preloadText_rideau_eau(text_rideau_eau[i], i);
    }

    function preloadText_rideau_eau(url, index) {
        var request_rideau_eau = new XMLHttpRequest();
        request_rideau_eau.open('GET', url, true);
        request_rideau_eau.onreadystatechange = function () {
            if (request_rideau_eau.readyState === XMLHttpRequest.DONE && request_rideau_eau.status === 200) {
                textContents_rideau_eau[index] = request_rideau_eau.responseText;

                if (index === 0) {
                    // Display the content of the first file on startup
                    preElement_rideau_eau.textContent = textContents_rideau_eau[0];
                    animate_rideau_eau();
                }
            }
        };
        request_rideau_eau.send();
    }

    function animate_rideau_eau() {
        setTimeout(function() {
            counter_rideau_eau = (counter_rideau_eau + 1) % textContents_rideau_eau.length;
            preElement_rideau_eau.textContent = textContents_rideau_eau[counter_rideau_eau];
            animate_rideau_eau();
        }, duration_rideau_eau[counter_rideau_eau]);
    }


    ///////////////////////oiseau///////////////////////////////////
    var text_oiseau = ['txt/oiseau_1.txt', 'txt/oiseau_2.txt'];
    var counter_oiseau = 0;
    var preElement_oiseau = document.getElementById("oiseau");
    var textContents_oiseau = [];
    var duration_oiseau = [250, 250]; // Duration for each text content in milliseconds

    for (var i = 0; i < text_oiseau.length; i++) {
        preloadText_oiseau(text_oiseau[i], i);
    }

    function preloadText_oiseau(url, index) {
        var request_oiseau = new XMLHttpRequest();
        request_oiseau.open('GET', url, true);
        request_oiseau.onreadystatechange = function () {
            if (request_oiseau.readyState === XMLHttpRequest.DONE && request_oiseau.status === 200) {
                textContents_oiseau[index] = request_oiseau.responseText;

                if (index === 0) {
                    // Display the content of the first file on startup
                    preElement_oiseau.textContent = textContents_oiseau[0];
                    animate_oiseau();
                }
            }
        };
        request_oiseau.send();
    }

    function animate_oiseau() {
        setTimeout(function() {
            counter_oiseau = (counter_oiseau + 1) % textContents_oiseau.length;
            preElement_oiseau.textContent = textContents_oiseau[counter_oiseau];
            animate_oiseau();
        }, duration_oiseau[counter_oiseau]);
    }






    ///////////////////////**********///////////////////////////////////
    ///////////////////////FONCTION///////////////////////////////////
        ///////////////////////******///////////////////////////////////





    ///////////////////////MODEM///////////////////////////////////




    function fonction_bateau(){
        if (localStorage.getItem("modem") == "ok") {
            document.getElementById("bateau").style.cursor = "auto";
       
        }else if (localStorage.getItem("modem") == "donne") {
            document.getElementById("bateau").style.cursor = "auto";

        }else{
            document.getElementById("modem").style.display = "block";
            document.getElementById("tout_fermer").style.display = "block";
            localStorage.setItem("modem", "ok");
        }
    }


///////////////////////////salle des ordis//////////////////////////////////////

    function fonction_salle_ordi(){
        window.location.href='../SCENE_SALLE_DES_ORDIS/salle_des_ordis.html';
    }


///////////////////////////oiseau//////////////////////////////////////

    function fonction_oiseau(){
        document.getElementById("parachute").style.display = "block";
        document.getElementById("oiseau").style.display = "none";
    }


///////////////////////////MANIFESTE_bouteille//////////////////////////////////////

    function fonction_bouteille(){
        if (localStorage.getItem("bouteille_a_la_mer") == "ok") {
            document.getElementById("etoile").style.cursor = "text";
        }else{
            document.getElementById("bouteille").style.display = "block";
            document.getElementById("tout_fermer").style.display = "block";
            localStorage.setItem("bouteille_a_la_mer", "ok");
        }
    }


///////////////////////////traces yeti//////////////////////////////////////

    function fonction_trace_yeti(){
        if (localStorage.getItem("trace_yeti") == "ok") {
            document.getElementById("trace").style.cursor = "text";
        }else{
            document.getElementById("yeti").style.display = "block";
            document.getElementById("tout_fermer").style.display = "block";
            localStorage.setItem("trace_yeti", "ok");
        }
    }


///////////////////////////BALEINE//////////////////////////////////////

    function fonction_bulle(){
        document.getElementById("baleine").style.display = "block";
        document.getElementById("bulle").style.display = "none";
    }

    function fonction_baleine(){
        document.getElementById("baleine").style.display = "none";
        document.getElementById("bulle").style.display = "block";
    }


///////////////////////////FERMER POPUPS//////////////////////////////////////
    function tout_fermer(){
        document.getElementById("modem").style.display = "none";
        document.getElementById("bouteille").style.display = "none";
        document.getElementById("yeti").style.display = "none";   
        document.getElementById("tout_fermer").style.display = "none";   
    }

</script>

</body>
</html>
